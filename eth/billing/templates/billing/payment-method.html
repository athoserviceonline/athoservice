{% extends 'base.html' %}
{% load static %}

{% block title %}
<title>Checkout</title>
 <meta name="description" content="A demo of Stripe Payment Intents" />

<!--     <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/global.css" />
 -->
{% endblock %}

{% block content %}

<div class="col-10 col-md-6 mx-auto">
	<h1>Add Payment Method</h1>
  <div class="stripe-payment-form" data-token="{{ publish_key }}" data-next-url="{% if next_url %}{{ next_url }}{% endif %}" data-btn-title='Add New Card'>  
  </div>
<!-- 
<form class="payment-form" action="/charge" method="post" id="payment-form" data-token="{{ publish_key }}" data-next-url="{% if next_url %}{{ next_url }}{% endif %}">#{% if next_url %}{{ next_url }}{% endif %}
	<div class="form-row">
				
	</div>
  <div id="card-element" class="form-control">
     Elements will create input elements here
  </div>

   We'll put the error messages in this element 
  <div id="card-errors" role="alert"></div>

  <button class="btn btn-primary my-3" id="submit">Pay</button>
</form>
  -->
</div>

{% endblock %}

// form.addEventListener('submit', function(ev) {
//   ev.preventDefault();
//   stripe.confirmCardPayment(clientSecret, {
//     payment_method: {
//       card: card,
//       billing_details: {
//         name: 'Jenny Rosen'
//       }
//     }
//   })



      // // The payment has been processed!
      // console.log(token.id)
      // var paymentMethodEndpoint = '/billing/payment-method/create/'
      // var data = {
      // 	"token": token.id
      // }
      // $.ajax({
      // 	data: data,
      // 	url: paymentMethodEndpoint,
      // 	method: "POST",
      // 	success:function(data){
      // 		console.log(data)
      // 	},
      // 	error: function(error){
      // 		console.log(error)
      // 	}
      // })

      // if (result.paymentIntent.status === 'succeeded') {
        // Show a success message to your customer
        // There's a risk of the customer closing the window before callback
        // execution. Set up a webhook or plugin to listen for the
        // payment_intent.succeeded event that handles any business critical
        // post-payment actions.
      // }